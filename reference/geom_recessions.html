<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="geom_recessions adds shaded recession bars to a time-series ggplot2 chart
(a chart with a date object in the x-axis.) These recession bars correspond to all
NBER-dated recessions
that overlap with the date range of the chart.
By default, each recession bar will be drawn as a light blue rectangle
spanning the entirety of the y-axis plus a dark blue rectangle drawn only over
the topmost part of the chart."><title>Add recession bars to time series graphs — geom_recessions • fedplot</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add recession bars to time series graphs — geom_recessions"><meta property="og:description" content="geom_recessions adds shaded recession bars to a time-series ggplot2 chart
(a chart with a date object in the x-axis.) These recession bars correspond to all
NBER-dated recessions
that overlap with the date range of the chart.
By default, each recession bar will be drawn as a light blue rectangle
spanning the entirety of the y-axis plus a dark blue rectangle drawn only over
the topmost part of the chart."><meta property="og:image" content="https://sergiocorreia.github.io/fedplot/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fedplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/areaplots.html">How to create area plots</a>
    <a class="dropdown-item" href="../articles/barplots.html">How to create barplots</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sergiocorreia/fedplot/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add recession bars to time series graphs</h1>
      <small class="dont-index">Source: <a href="https://github.com/sergiocorreia/fedplot/blob/HEAD/R/recession_bars.R" class="external-link"><code>R/recession_bars.R</code></a></small>
      <div class="d-none name"><code>geom_recessions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>geom_recessions</code> adds shaded recession bars to a time-series ggplot2 chart
(a chart with a date object in the x-axis.) These recession bars correspond to all
<a href="https://www.nber.org/research/data/us-business-cycle-expansions-and-contractions" class="external-link">NBER-dated</a> recessions
that overlap with the date range of the chart.
By default, each recession bar will be drawn as a light blue rectangle
spanning the entirety of the y-axis plus a dark blue rectangle drawn only over
the topmost part of the chart.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geom_recessions</span><span class="op">(</span></span>
<span>  fill <span class="op">=</span> <span class="st">"#BDCFDE"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  draw_top_bar <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  top_fill <span class="op">=</span> <span class="st">"#236192"</span>,</span>
<span>  top_alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"midpoint"</span>, <span class="st">"trough"</span>, <span class="st">"peak"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fill</dt>
<dd><p>The color of the main bar; defaults to a light blue tint.</p></dd>


<dt>alpha</dt>
<dd><p>The alpha transparency of the main bar; defaults to 1.0 (totally opaque).</p></dd>


<dt>draw_top_bar</dt>
<dd><p>Whether to draw the top bar or not.</p></dd>


<dt>top_fill</dt>
<dd><p>The color of the top bar; defaults to a dark blue tint.</p></dd>


<dt>top_alpha</dt>
<dd><p>The alpha transparency of the top blue bar; defaults to 1.0 (totally opaque).</p></dd>


<dt>method</dt>
<dd><p>The method or interpretation used to show the recession data. Defaults to the midpoint method.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="implementation-details">Implementation details<a class="anchor" aria-label="anchor" href="#implementation-details"></a></h2>
    

<p>Internally, <code>geom_recessions</code> works by adding a <a href="customproto.html">GeomRecessions</a>
<a href="https://ggplot2.tidyverse.org/reference/ggproto.html" class="external-link">ggplot2::ggproto</a> object, which inherits from <a href="https://ggplot2.tidyverse.org/reference/ggplot2-ggproto.html" class="external-link">ggplot2::Geom</a>. It
replaces the <code>setup_data</code> and <code>draw_panel</code> methods in order to
load the recession data and draw the bars respectively.
Further, the actual drawing is done by two <a href="https://rdrr.io/r/grid/grid.rect.html" class="external-link">grid::rectGrob</a>
objects, for the main blue bar and the top dark blue bar.</p>
    </div>
    <div class="section level2">
    <h2 id="inspiration-and-alternative-implementations">Inspiration and alternative implementations<a class="anchor" aria-label="anchor" href="#inspiration-and-alternative-implementations"></a></h2>
    

<p>This function is heavily inspired on <code>geom_recessions</code> from the <a href="https://cmap-repos.github.io/cmapplot/reference/geom_recessions.html" class="external-link">CMAPPLOT</a> package.</p>
    </div>
    <div class="section level2">
    <h2 id="alternative-methods-used-to-show-recession-data">Alternative methods used to show recession data<a class="anchor" aria-label="anchor" href="#alternative-methods-used-to-show-recession-data"></a></h2>
    

<p>As discussed in the St. Louis Fed <a href="https://fred.stlouisfed.org/data/USREC.txt" class="external-link">FRED</a> website (<a href="https://fred.stlouisfed.org/data/USREC.txt" class="external-link">HTML version</a>), there are multiple interpretations or methods for shading recessions.
First, the "midpoint" method shades both the peak and trough months. It is used by the Fed Board and St. Louis Fed for their publications.
Second, the "trough" method shades the trough month but not the peak month. It is used in FRED graphs.
Lastly, the "peak" method shades the peak month but not the trough month.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="http://scorreia.com/" class="external-link">Sergio Correia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

